<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
  </head>
  <body>
    <form id="main">
      <div class="form-group">
        <div class="input-group">
          <span class="input-group-addon">ClientID</span>
          <input class="form-control" v-model="client_id" disabled>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <span class="input-group-addon">Scope</span>
          <input class="form-control" v-for="scope in scopes" v-model="scope" disabled>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <span class="input-group-addon">Discovery</span>
          <input class="form-control" v-model="discovery" disabled>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <span class="input-group-addon">會員資料</span>
          <input class="form-control" v-model="list">
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <span class="input-group-addon">主日出席</span>
          <input class="form-control" v-for="attendance in attendances" v-model="attendance">
        </div>
      </div>
      <input class="btn btn-secondary" type="button" value="測試" onclick="test()">
      <input class="btn btn-success" type="submit" value="提交" disabled>
    </form>
    <pre id="logs"></pre>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
    <!-- Vue.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.26/vue.min.js"></script>
    <script>
var vm = new Vue({
  el:"#main",
  data:{
    client_id: '',
    scopes: [],
    discovery: '',
    list: '',
    attendances: [],
  },
});
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
var socket = io();
socket.emit('info');
socket.on('info', function(data){
  Object.keys(data).forEach(function(k){
    vm[k] = data[k];
  });
});
function test(){
  socket.emit('test', vm.$data);
}
socket.on('logs', function(logs){
  $('#logs').text(logs);
});
socket.on('save', function(){
  $('#main input[type="submit"]').prop('disabled', false);
});
$('#main').on('submit', function(){
  socket.emit('save', vm.$data);
});
    </script>
  </body>
</html>
